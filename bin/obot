#!/usr/bin/python3
# OBOT - 24/7 channel daemon
#
#

import os, sys ; sys.path.insert(0, os.getcwd())

from ob.csl import Console
from ob.krn import boot, cmd, os
from ob.trm import execute

def main():
    k = boot("obot")
    if "h" in k.cfg.opts:
        from omod.hlp import help
        return help()
    k.walk("obot,omod")
    k.init(k.cfg.mods)
    if k.cfg.txt:
        return k.cmd(k.cfg.otxt)
    if "s" in k.cfg.opts or k.cfg.mods:
        c = Console()
        c.start()
        k.start()
        k.wait()

execute(main)
os._exit(0)
