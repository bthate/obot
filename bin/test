#!/usr/bin/python3

import os, sys ; sys.path.insert(0, os.getcwd())

import os, sys, time, unittest
import ob.obj
import obot.rss

from ob.krn import boot, execute
from ob.prs import parse_cli

def main():
    obot.rss.debug = True
    ob.obj.wd = os.path.expanduser("~/.test")
    k = boot("test")
    k.walk("ob,obot,omod,mymod")
    k.start()
    test_path = os.getcwd() + os.sep + "tests"
    if k.cfg.txt:
        pat = "test_%s*" % k.cfg.txt
    else:
        pat = "test*"
    suite = unittest.loader.TestLoader().discover(test_path, pattern=pat)
    unittest.TextTestRunner(verbosity=3).run(suite)
    k.wait()
   
execute(main)
os._exit(0)
